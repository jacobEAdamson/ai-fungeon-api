<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AI Fungeon Demo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">  
  </head>
  <body class="text-center">

    <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
      <header class="masthead mb-auto">
        <div class="inner">
          <h3 class="masthead-brand">AI Fungeon</h3>
          <nav class="nav nav-masthead justify-content-center">
          </nav>
        </div>
      </header>

      <main role="main" class="inner cover">
        <h1 class="cover-heading">Try it out!</h1>
        <form id="story-variables">
          <div class="row">
            <div class="col">
              <input type="text" class="form-control" name="person_name" placeholder="Name">
            </div>
          </div>
          <button type="submit" class="btn btn-primary">Generate Your Story</button>
        </form>
        <p class="lead">
          <div id="story-output">

          </div>
        </p>
      </main>

      <footer class="mastfoot mt-auto">
        <div class="inner">
          <p>Copyright (c) 2024-2025 Jacob Adamson: <a href="https://github.com/jacobEAdamson/ai-fungeon-api/blob/master/LICENSE">MIT License</a></p>
        </div>
      </footer>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js" integrity="sha512-LhccdVNGe2QMEfI3x4DVV3ckMRe36TfydKss6mJpdHjNFiV07dFpS2xzeZedptKZrwxfICJpez09iNioiSZ3hA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
      $("#story-variables").on("submit", async function(e) {
        e.preventDefault()
        const params = $(e.target).serialize();
        const result = await $.ajax({
          method: "GET",
          url: `http://localhost:5000/?${params}`,
        });

        const converter = new showdown.Converter();
        const html = converter.makeHtml(result);

        $("#story-output").html(html);
        
      })
    </script>
  </body>
</html>
